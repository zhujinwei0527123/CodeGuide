---
title: 3.2：搜索和添加好友
pay: https://articles.zsxq.com/id_n6wh4jv6txt3.html
---

# 3.2：搜索和添加好友

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)

>沉淀、分享、成长，让自己和他人都能有所收获！

## 一、前言介绍

在上一章节我们实现了用户登录到成功后跳转到主窗体聊天中，而目前跳转后我们还不能发起 聊天，因为目前我们的个人用户还没有自己的好友。那么接下来我们来实现搜索和添加好友功能，因为在微信中是可以从手机端扫描或者通信录进行添加好友。但是我们目前只有 PC 端所以需要在服务端来搜索添加。

在实现功能之前，可以先回顾下我们进行库表设计的时候有一张用户表，那么可以在搜索的时候从这里搜索好友信息，搜索完成后选择添加。那么，也可以考虑手机微信在最开始加好友的过程，是可以申请读取每一个用户的手机通信录，那么这些通信录的结合就是一张很大的用户关系网。

**参考用户表**：

![](/images/article/project/im/project-im-3.2-01.png)

## 二、流程设计

![](/images/article/project/im/project-im-3.2-02.png)

- 从上面的流程中可以看到，这里包含了两部分内容；(1) 搜索好友，(2) 添加好友。当天就完成好友后，好友会出现到我们的好友栏中。
- 并且这里面我们采用的是单方面同意加好友，也就是你添加一个好友的时候，对方也同样有你的好友信息。
- 如果你的业务中是需要添加好友并同意的，那么可以在发起好友添加的时候，添加一条状态信息，请求加好友。对方同意后，两个用户才能成为好友并进行通信。